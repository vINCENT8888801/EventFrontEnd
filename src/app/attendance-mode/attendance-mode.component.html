<div style="text-align:center ; margin:0px">
  <div class="header">
    <h1>
      Tracking Attendance For {{event.name}}
    </h1>
  </div>


  <div class="body">
    <webcam [height]="500" [width]="500" [trigger]="triggerObservable" (imageCapture)="handleImage($event)"
      *ngIf="showWebcam" [allowCameraSwitch]="allowCameraSwitch" [switchCamera]="nextWebcamObservable"
      [videoOptions]="videoOptions" [imageQuality]="1" (cameraSwitched)="cameraWasSwitched($event)"
      (initError)="handleInitError($event)"></webcam>
    <br />
    <!--<button class="actionBtn" (click)="triggerSnapshot();">Take A Snapshot</button>
      <button class="actionBtn" (click)="toggleWebcam();">Toggle Webcam</button>
      <br/>
      <button class="actionBtn" (click)="showNextWebcam(true);" [disabled]="!multipleWebcamsAvailable">Next Webcam</button>
      <input id="cameraSwitchCheckbox" type="checkbox" [(ngModel)]="allowCameraSwitch"><label for="cameraSwitchCheckbox">Allow Camera Switch</label>
      <br/>
      DeviceId: <input id="deviceId" type="text" [(ngModel)]="deviceId" style="width: 500px">
      <button (click)="showNextWebcam(deviceId);">Activate</button> -->
  </div>
</div>



<h4 *ngIf="errors.length > 0">Messages:</h4>
<ul *ngFor="let error of errors">
  <li>{{error | json}}</li>
</ul>


<ng-template #detectResponseModal let-modal>
  <div class="modal-header bg-primary">
    <h4 class="modal-title" id="success-register">Attendee Detected</h4>
  </div>
  <div *ngIf="registeringAttendance&&!loading">
    <div class="modal-body">
      <div class="container-fluid">
        <div class="row">
          <div class="snapshot" *ngIf="webcamImage">
            <h2 *ngIf="socketRes || socketRes.accuracy"> Accuracy: {{socketRes.accuracy}}</h2>
            <h2 *ngIf="socketRes || socketRes.name"> Detected Individual: {{socketRes.name}}</h2>
            <img *ngIf="socketRes || socketRes.imgString" [src]="socketRes.imgString" />
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="markAttendance()">Yes</button>
        <button type="button" class="btn btn-outline-danger" (click)="backToAttendance()">No</button>
      </div>
    </div>
  </div>
  <div *ngIf="registeringAttendance&& loading">
    <div class="modal-body">
      <div class="container-fluid">
        <div class="row">
          <div  class="spinner-border text-primary" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </div>
      </div>

      <div class="modal-footer">
      </div>
    </div>
  </div>



  <div *ngIf="!registeringAttendance&& loading">
    <div class="modal-body">
      <div class="container-fluid">
        <div class="row">
          <div >
            <h2 *ngIf="isSuccessfulAttendance"> Attendance Taken Successfully</h2>
            <h2 *ngIf="!isSuccessfulAttendance"> Attendance Taking is Unsuccessful.Please retry.</h2>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="doneAttendance()">OK</button>
      </div>
    </div>
  </div>


</ng-template>
